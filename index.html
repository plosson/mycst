<!doctype html>

<html lang="en" xmlns:x-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>My CST</title>
    <meta name="description" content="My CST - Store your CST safely">
    <meta name="author" content="My CST">

    <meta property="og:title" content="My CST">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mycst.link/">
    <meta property="og:description" content="My CST - Store your CST safely">
    <meta property="og:image" content="https://mycst.link/public/img/favicon-152x152.png">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="My CST"/>
    <meta name="twitter:description" content="My CST - Store your CST safely"/>
    <meta name="twitter:image" content="https://mycst.link/public/img/favicon-152x152.png"/>

    <meta name="application-name" content="My CST"/>
    <link rel="icon" type="image/png" sizes="32x32" href="cac4565562df515771d3.png">
<link rel="icon" type="image/png" sizes="16x16" href="5dd8cad89b0b6b42298e.png">
<link rel="icon" type="image/png" sizes="152x152" href="7d5e17338c0bc84a74ac.png">
<link rel="apple-touch-icon" href="68489b2862bc388bcbca.png">
<link rel="apple-touch-icon" sizes="76x76" href="2b904d84ea2fe97eba79.png">
<link rel="apple-touch-icon" sizes="120x120" href="b9a12021214773e63e8a.png">
<link rel="apple-touch-icon" sizes="152x152" href="8f0284d92eed70f393bf.png">

<link href="//unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600&display=swap"
      rel="stylesheet">
<style type="text/css">
    [x-cloak] {
        display: none !important;
    }
</style>
<script defer src="main.b80c1ba5beb82a337ed5.js"></script></head>

<body x-data="data" id="body" class="flex flex-col" @hashchange.window="changePage(location.hash)">
<div id="main" class="p-4 flex flex-col items-center" x-show="page===''">
    <h1 class="mb-5 border-b-2 border-blue-300">Scan</h1>
    <main id="videoContainer"></main>
</div>

<div id="qr" x-show="page=='#qr'" class="p-4 flex flex-col items-center bg-green-50 h-screen" x-cloak>
    <div id="qr-content" class="w-7/12">
        <div id="bm"></div>
        <div id="qrcode" x-on:click="changePage('#details')" class="w-7/12"></div>
    </div>
    <div id="info">
        <p class="text-xs mt-2">Tap the QR-code to enlarge</p>
    </div>
    <div class="w-11/12 mt-5 p-3 bg-black text-gray-200 relative overflow-hidden rounded-xl flex flex-col"
         style="background-image: url('/public/img/eu_avatar_big_light_cropped.png'); background-repeat: no-repeat; background-position: right 0 top 0;">
        <div class="mb-2">
            <p class="text-xs">Last name</p>
            <p><span x-text="pass.nam.fn"></span></p>
        </div>
        <div class="mb-2">
            <p class="text-xs">Given name</p>
            <p><span x-text="pass.nam.gn"></span></p>
        </div>
        <div class="mb-2">
            <p class="text-xs">Date of birth</p>
            <p><span x-text="pass.dob"></span></p>
        </div>
    </div>
    <div class="mt-2" x-show="findPass(text) > -1">
        <button x-on:click.prevent="deletePass(text)"
                class="content-center bg-blue-500 hover:bg-blue-700 text-white font-bold mt-2 py-2 px-4 rounded">Remove
        </button>
    </div>
    <div class="mt-2" class="flex flex-col items-center" x-show="findPass(text) == -1">
        <div class="flex justify-center">
            <button x-on:click.prevent="savePass(text)"
                    class="content-center bg-blue-500 hover:bg-blue-700 text-white font-bold mt-2 py-2 px-4 rounded">
                Save
            </button>
        </div>
        <div>
            <small>Everything is saved on your device only.</small>
        </div>
    </div>
</div>

<div id="qr-detail" x-show="page=='#details'" class="p-4 flex flex-col h-screen items-center" x-cloak>
    <div id="qr-content-large" class="mt-20">
        <div id="bm-large"></div>
        <div id="qrcode-large" class="object-scale-down w-11/12"></div>
    </div>
    <div class="mt-5">
        <a href="" x-on:click.prevent="changePage('#qr')" class="font-bold">Back to overview</a>
    </div>
</div>

<div id="from-txt" x-show="page=='#encode'" class="p-4 flex flex-col w-full h-screen items-center" x-cloak>
    <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2 w-full" for="qr-data">
            Code Text
        </label>
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               id="qr-data" type="text" placeholder="HC1" x-model="pass.text">
    </div>
    <div class="mt-2">
        <button x-on:click.prevent="encode"
                class="content-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Encode
        </button>
    </div>
</div>

<div id="library" x-show="page=='#library'" class="p-4 flex flex-col h-screen items-center" x-cloak>
    <h1 class="border-b-2 border-blue-300">My Passes</h1>
    <template x-for="(p,index) in library">
        <div class="w-11/12 mt-5 p-3 bg-gray-100 relative overflow-hidden rounded-xl flex flex-col"
             x-on:click="logo = p.logo; showPass(p.text, p.logo)">
            <div class="mb-2 flex flex-row justify-between">
                <div>
                    <p><img class="inline" src="3d3ce27e1c68d289340f.svg" width="24px">
                        <span x-text="p.json.nam.gn"></span> <span x-text="p.json.nam.fn"></span></p>
                </div>
                <div class="bg-white rounded-full w-6 h-6 flex justify-center items-center text-center p-4" x-cloak x-show="p.logo === ''">
                    <span class="material-icons" style="font-size: 18px;">check</span>
                </div>
                <div class="bg-white rounded-full flex justify-center items-center text-center p-4" x-cloak x-show="p.logo !== ''">
                    <img :src="`/public/img/qr_logo_${p.logo}.png`" width="24" height="24">
                </div>
            </div>
            <div class="mb-2 flex flex-row justify-between">
                <div>
                    <p><span class="text-sm" x-text="p.json.dob"></span> <small x-show="p.logo" x-text="`[${p.logo}]`"></small></p>
                </div>
                <div class="mt-3">
                    <span class="material-icons text-gray-400">chevron_right</span>
                </div>
            </div>
        </div>
    </template>
    <div class="mt-3" x-show="library.length > 0" x-cloak>
        <a href="#library" x-on:click="library = []">Delete All</a>
    </div>
    <div class="mt-3" x-show="library.length == 0" x-cloak>
        You don't have any saved passes.
    </div>
</div>

<div id="library" x-show="page=='#upload'" class="p-4 flex flex-col h-screen items-center" x-cloak>
    <h1 class="border-b-2 border-blue-300">From a photo</h1>
    <div id="imageContainer"></div>
    <div class="w-full h-screen">
        <section id="bottom-navigation" class="flex flex-col justify-center items-center">
            <label class="bg-blue-500 hover:bg-blue-700 text-white font-bold mt-10 py-2 px-4 rounded inline-flex items-center" for="qr-input-file">
                <span class="material-icons text-white-1 mr-1">upload</span> <span>Select Image</span>
            </label>
            <input type="file" id="qr-input-file" accept="image/*" class="hidden">
        </section>
    </div>
</div>


<div class="w-full h-screen" x-show="page !== '#details'" x-cloak>
    <!-- <section id="bottom-navigation" class="md:hidden block fixed inset-x-0 bottom-0 z-10 bg-white shadow"> // if shown only tablet/mobile-->
    <section id="bottom-navigation" class="block fixed z-10 inset-x-0 bottom-0 z-10 bg-white shadow">
        <div id="tabs" class="flex justify-between">
            <a href="/#library"
               class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                <span class="material-icons" style="font-size: 24px;">history</span>
                <span class="tab tab-home block text-xs">My Passes</span>
            </a>
            <a href="/"
               class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                <span class="material-icons" style="font-size: 24px;">qr_code_scanner</span>
                <span class="tab tab-home block text-xs">Scan</span>
            </a>
            <a href="/#upload"
               class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                <span class="material-icons" style="font-size: 24px;">photo_library</span>
                <span class="tab tab-explore block text-xs">From Photo</span>
            </a>
        </div>
    </section>
</div>

</body>